<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">

    <changeSet author="liquibase" id="20250708162200">
        <createView replaceIfExists="true" viewName="V_POSITION_PAYMENT">
            SELECT ID, PA_FISCAL_CODE, NOTICE_ID, CREDITOR_REFERENCE_ID, PAYMENT_TOKEN, BROKER_PA_ID, STATION_ID, STATION_VERSION, PSP_ID, BROKER_PSP_ID, CHANNEL_ID, IDEMPOTENCY_KEY, AMOUNT, FEE, OUTCOME, PAYMENT_METHOD, PAYMENT_CHANNEL, TRANSFER_DATE, PAYER_ID, APPLICATION_DATE, INSERTED_TIMESTAMP, UPDATED_TIMESTAMP, FK_PAYMENT_PLAN, RPT_ID, PAYMENT_TYPE, CARRELLO_ID, ORIGINAL_PAYMENT_TOKEN, FLAG_IO, RICEVUTA_PM, FLAG_ACTIVATE_RESP_MISSING, FLAG_PAYPAL, INSERTED_BY, UPDATED_BY, TRANSACTION_ID, CLOSE_VERSION, FEE_PA, BUNDLE_ID, BUNDLE_PA_ID, PM_INFO, MBD, FEE_SPO
            FROM ${schemaOnline}.POSITION_PAYMENT
        </createView>
    </changeSet>
    
        <changeSet author="liquibase" id="20250708162201">
        <createView fullDefinition="true" viewName="V_RT_VERSAMENTI">CREATE OR REPLACE VIEW ${schema}.V_RT_VERSAMENTI(ID,PROGRESSIVO,IMPORTO_RT,ESITO,CAUSALE_VERSAMENTO,DATI_SPECIFICI_RISCOSSIONE,COMMISSIONE_APPLICATE_PSP,FK_RT,INSERTED_TIMESTAMP,UPDATED_TIMESTAMP) AS SELECT ID,PROGRESSIVO,IMPORTO_RT,ESITO,CAUSALE_VERSAMENTO,DATI_SPECIFICI_RISCOSSIONE,COMMISSIONE_APPLICATE_PSP,FK_RT,INSERTED_TIMESTAMP,UPDATED_TIMESTAMP FROM  ${schemaOnline}.RT_VERSAMENTI</createView>
    </changeSet>
    
    <changeSet author="liquibase" id="20250708162210">
        <createView fullDefinition="true" viewName="V_PM_SESSION_DATA">CREATE OR REPLACE VIEW ${schema}.V_PM_SESSION_DATA (ID, ID_SESSIONE, TIPO, MOBILE_TOKEN, RRN, TIPO_INTERAZIONE, IMPORTO_TOTALE_PAGATO, ESITO_TRANSAZIONE_CARTA, CODICE_AUTORIZZATIVO, TIMESTAMP_OPERAZIONE, INSERTED_TIMESTAMP, UPDATED_TIMESTAMP, MOTIVO_ANNULLAMENTO) AS SELECT ID,ID_SESSIONE,TIPO,MOBILE_TOKEN,RRN,TIPO_INTERAZIONE,IMPORTO_TOTALE_PAGATO,ESITO_TRANSAZIONE_CARTA,CODICE_AUTORIZZATIVO,TIMESTAMP_OPERAZIONE,INSERTED_TIMESTAMP,UPDATED_TIMESTAMP,MOTIVO_ANNULLAMENTO FROM  ${schemaOnline}.PM_SESSION_DATA</createView>
    </changeSet>
    
        <changeSet author="liquibase" id="20250708162220">
        <createView fullDefinition="true" viewName="V_RT">CREATE OR REPLACE VIEW ${schema}.V_RT(ID,ID_SESSIONE,CCP,IDENT_DOMINIO,IUV,COD_ESITO,ESITO,DATA_RICEVUTA,DATA_RICHIESTA,ID_RICEVUTA,ID_RICHIESTA,SOMMA_VERSAMENTI,INSERTED_TIMESTAMP,UPDATED_TIMESTAMP,CANALE) AS SELECT  ID,ID_SESSIONE,CCP,IDENT_DOMINIO,IUV,COD_ESITO,ESITO,DATA_RICEVUTA,DATA_RICHIESTA,ID_RICEVUTA,ID_RICHIESTA,SOMMA_VERSAMENTI,INSERTED_TIMESTAMP,UPDATED_TIMESTAMP,CANALE FROM  ${schemaOnline}.RT</createView>
    </changeSet>
    
        <changeSet author="liquibase" id="20250708162230">
        <createView fullDefinition="true" viewName="V_RPT">CREATE OR REPLACE VIEW ${schema}.V_RPT(ID,ID_SESSIONE,CCP,IDENT_DOMINIO,IUV,BIC_ADDEBITO,DATA_MSG_RICH,FLAG_CANC,IBAN_ADDEBITO,ID_MSG_RICH,STAZ_INTERMEDIARIOPA,INTERMEDIARIOPA,CANALE,PSP,INTERMEDIARIOPSP,TIPO_VERSAMENTO,NUM_VERSAMENTI,RT_SIGNATURE_CODE,SOMMA_VERSAMENTI,PARAMETRI_PROFILO_PAGAMENTO,FK_CARRELLO,INSERTED_TIMESTAMP,UPDATED_TIMESTAMP,RICEVUTA_PM,WISP_2) AS SELECT  ID,ID_SESSIONE,CCP,IDENT_DOMINIO,IUV,BIC_ADDEBITO,DATA_MSG_RICH,FLAG_CANC,IBAN_ADDEBITO,ID_MSG_RICH,STAZ_INTERMEDIARIOPA,INTERMEDIARIOPA,CANALE,PSP,INTERMEDIARIOPSP,TIPO_VERSAMENTO,NUM_VERSAMENTI,RT_SIGNATURE_CODE,SOMMA_VERSAMENTI,PARAMETRI_PROFILO_PAGAMENTO,FK_CARRELLO,INSERTED_TIMESTAMP,UPDATED_TIMESTAMP,RICEVUTA_PM,WISP_2 FROM  ${schemaOnline}.RPT</createView>
    </changeSet>
    
        <changeSet author="liquibase" id="20250708162240">
        <createView fullDefinition="true" viewName="V_RPT_VERSAMENTI">CREATE OR REPLACE VIEW ${schema}.V_RPT_VERSAMENTI (ID, PROGRESSIVO, IMPORTO, COMMISSIONE_CARICO_PA, IBAN, IBAN_APPOGGIO, BIC_ACCREDITO, BIC_APPOGGIO, CREDENZIALI_PAGATORE, CAUSALE_VERSAMENTO, TIPO_VERSAMENTO, DATI_SPECIFICI_RISCOSSIONE, FK_RPT, INSERTED_TIMESTAMP, UPDATED_TIMESTAMP) AS SELECT ID,PROGRESSIVO,IMPORTO,COMMISSIONE_CARICO_PA,IBAN,IBAN_APPOGGIO,BIC_ACCREDITO,BIC_APPOGGIO,CREDENZIALI_PAGATORE,CAUSALE_VERSAMENTO,TIPO_VERSAMENTO,DATI_SPECIFICI_RISCOSSIONE,FK_RPT,INSERTED_TIMESTAMP,UPDATED_TIMESTAMP FROM  ${schemaOnline}.RPT_VERSAMENTI</createView>
    </changeSet>
    
</databaseChangeLog>
